/*! For license information please see stories-tags-stories.36cebe2b.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunktags=self.webpackChunktags||[]).push([[224],{"./node_modules/react/cjs/react-jsx-runtime.production.js":(__unused_webpack_module,exports)=>{var REACT_ELEMENT_TYPE=Symbol.for("react.transitional.element"),REACT_FRAGMENT_TYPE=Symbol.for("react.fragment");function jsxProd(type,config,maybeKey){var key=null;if(void 0!==maybeKey&&(key=""+maybeKey),void 0!==config.key&&(key=""+config.key),"key"in config)for(var propName in maybeKey={},config)"key"!==propName&&(maybeKey[propName]=config[propName]);else maybeKey=config;return config=maybeKey.ref,{$$typeof:REACT_ELEMENT_TYPE,type,key,ref:void 0!==config?config:null,props:maybeKey}}exports.Fragment=REACT_FRAGMENT_TYPE,exports.jsx=jsxProd,exports.jsxs=jsxProd},"./node_modules/react/jsx-runtime.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/react/cjs/react-jsx-runtime.production.js")},"./src/stories/tags.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,WithPredefinedTags:()=>WithPredefinedTags,__namedExportsOrder:()=>__namedExportsOrder,default:()=>tags_stories});var react=__webpack_require__("./node_modules/react/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const SUGGESTIONS=[{id:"ask-ai",label:"Ask AI",icon:"🤖"},{id:"input",label:"Input",icon:"📝"},{id:"perplexity",label:"Perplexity",icon:"🔄"}];function Tags(){const[tags,setTags]=(0,react.useState)([]),[inputValue,setInputValue]=(0,react.useState)(""),[showSuggestions,setShowSuggestions]=(0,react.useState)(!1),containerRef=((0,react.useRef)(null),(0,react.useRef)(null)),[hoverLine,setHoverLine]=(0,react.useState)({show:!1,top:0});return(0,jsx_runtime.jsxs)("div",{style:{display:"flex",flexDirection:"row-reverse",gap:"8px",alignItems:"flex-start"},children:[(0,jsx_runtime.jsxs)("div",{className:"tag-container",onDrop:event=>{event.preventDefault();const data=JSON.parse(event.dataTransfer.getData("text/plain"));if(data.isInternalDrag){const tagElement=containerRef.current.querySelector(`[data-tag-id="${data.id}"]`);if(tagElement){const dropPoint=document.caretRangeFromPoint(event.clientX,event.clientY);if(dropPoint){const selection=window.getSelection();selection.removeAllRanges(),selection.addRange(dropPoint);const range=selection.getRangeAt(0);tagElement.remove(),range.insertNode(tagElement);const space=document.createTextNode(" ");range.insertNode(space),range.setStartAfter(space),range.setEndAfter(space),selection.removeAllRanges(),selection.addRange(range)}}return}const tagData=data;if(tagData){setTags((prev=>[...prev,tagData.id]));const tagElement=document.createElement("span");if(tagElement.className="tag",tagElement.setAttribute("data-tag-id",tagData.id),tagElement.setAttribute("contenteditable","false"),tagElement.style.color="#ffffff",tagElement.innerHTML=`\n        <span class="tag-icon">${tagData.icon}</span>\n        <span class="tag-label">${tagData.label}</span>\n      `,tagElement.draggable=!0,tagElement.onmousedown=e=>e.stopPropagation(),tagElement.ondragstart=e=>((e,tagId)=>{e.stopPropagation(),e.dataTransfer.setData("text/plain",JSON.stringify({id:tagId,isInternalDrag:!0}))})(e,tagData.id),hoverLine.show){const container=containerRef.current,range=document.createRange(),nodes=(window.getSelection(),Array.from(container.childNodes));for(let i=0;i<nodes.length;i++){const node=nodes[i];if(node.getBoundingClientRect().top>hoverLine.top){range.setStartBefore(node);const br=document.createElement("br");range.insertNode(br),range.insertNode(tagElement);const space=document.createTextNode(" ");range.insertNode(space),range.insertNode(document.createElement("br"));break}}}else{const dropPoint=document.caretRangeFromPoint(event.clientX,event.clientY);if(dropPoint){const selection=window.getSelection();selection.removeAllRanges(),selection.addRange(dropPoint);const range=selection.getRangeAt(0);range.insertNode(tagElement);const space=document.createTextNode(" ");range.insertNode(space),range.setStartAfter(space),range.setEndAfter(space),selection.removeAllRanges(),selection.addRange(range)}}}setHoverLine({show:!1,top:0}),setShowSuggestions(!1)},onDragOver:e=>{e.preventDefault();const container=containerRef.current,rect=container.getBoundingClientRect(),mouseY=e.clientY-rect.top,textNodes=Array.from(container.childNodes);let lineFound=!1;for(let i=0;i<textNodes.length;i++){const nodeRect=textNodes[i].getBoundingClientRect(),nextNode=textNodes[i+1];if(nextNode){const nextRect=nextNode.getBoundingClientRect(),gapMiddle=nodeRect.bottom+(nextRect.top-nodeRect.bottom)/2;if(Math.abs(mouseY-(gapMiddle-rect.top))<5){setHoverLine({show:!0,top:gapMiddle-rect.top}),lineFound=!0;break}}}lineFound||setHoverLine({show:!1,top:0})},onDragLeave:()=>setHoverLine({show:!1,top:0}),contentEditable:!0,suppressContentEditableWarning:!0,ref:containerRef,onMouseEnter:()=>setShowSuggestions(!0),onFocus:()=>setShowSuggestions(!0),onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||setTimeout((()=>{document.querySelector(".tag-container:hover")||setShowSuggestions(!1)}),200)},onKeyDown:e=>{if("Enter"===e.key){e.preventDefault();const selection=window.getSelection(),range=selection.getRangeAt(0),br1=document.createElement("br"),br2=document.createElement("br");return range.insertNode(br1),range.insertNode(br2),range.setStartAfter(br2),range.setEndAfter(br2),selection.removeAllRanges(),selection.addRange(range),!1}},style:{color:"#ffffff",flex:1,position:"relative",minHeight:"100px"},children:[hoverLine.show&&(0,jsx_runtime.jsx)("div",{style:{position:"absolute",left:0,right:0,top:hoverLine.top,borderTop:"2px solid #666",pointerEvents:"none"}}),(0,jsx_runtime.jsx)("span",{style:{color:"#666"},children:"Type or drag tags here..."})]}),showSuggestions&&(0,jsx_runtime.jsx)("div",{className:"suggestion-popover",children:SUGGESTIONS.map((suggestion=>(0,jsx_runtime.jsxs)("div",{className:"suggestion-item",draggable:!0,onDragStart:e=>((event,suggestion)=>{event.dataTransfer.setData("text/plain",JSON.stringify(suggestion))})(e,suggestion),children:[(0,jsx_runtime.jsx)("span",{className:"suggestion-icon",children:suggestion.icon}),suggestion.label]},suggestion.id)))})]})}Tags.__docgenInfo={description:"",methods:[],displayName:"Tags"};const tags_stories={title:"Components/Tags",component:Tags},Template=args=>(0,jsx_runtime.jsx)(Tags,{...args}),Default=Template.bind({});Default.args={};const WithPredefinedTags=Template.bind({});WithPredefinedTags.args={};const __namedExportsOrder=["Default","WithPredefinedTags"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => <Tags {...args} />",...Default.parameters?.docs?.source}}},WithPredefinedTags.parameters={...WithPredefinedTags.parameters,docs:{...WithPredefinedTags.parameters?.docs,source:{originalSource:"args => <Tags {...args} />",...WithPredefinedTags.parameters?.docs?.source}}}}}]);